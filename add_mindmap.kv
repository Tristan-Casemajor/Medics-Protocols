#:import specialty_selector specialty_selector

<AddMindMapLayout>:
    preview_image: preview_image
    confirm_label: confirm
    orientation: "vertical"
    padding: app.spacing_padding
    spacing: app.spacing_padding
    canvas.before:
        Color:
            rgba: app.menu_background
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        size_hint: 1, None
        height: root.height/23
        text: "Choissisez v√¥tre image : "
    Button:
        text: "Parcourir"
        size_hint: None, None
        size: root.width/5.5, root.height/13
        pos_hint: {"center_x": 0.5}
        on_press: app.main_screen_manager.push_screen("SelectFile")
    PreviewImage:
        id: preview_image
        source: "images/icon.png"

    SpecialitySelector:
        id: speciality_selector
        size_hint: None, 0.3
        width: dp(160)
        pos_hint: {"center_x":0.5}

    BoxLayout:
        size_hint: None, None
        pos_hint: {"center_x": 0.5}
        size: dp(380), dp(27)
        Label:
            text: "Nom de l'algorithme : "
        TextInput:
            size_hint: 1.8, 1
            id: sheet_name
            cursor_color: 0, 0, 0, 1
            multiline: False

    Button:
        background_normal: ''
        background_color: 0.22, 0.839, 0.15, 1
        text: "Ajouter"
        size_hint: None, None
        size: root.width/6, root.height/12
        pos_hint: {"center_x": 0.5}
        on_press: root.save_mind_map(preview_image.source, speciality_selector.layout_stack.choice, sheet_name.text)

    Label:
        id: confirm
        text: root.confirm_text
        size_hint: 1, None
        height: 0